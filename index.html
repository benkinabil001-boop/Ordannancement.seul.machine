<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ordonnancement sur une seule machine â€” Projet IA</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Poppins:wght@600;700&display=swap" rel="stylesheet">

  <!-- CSS local -->
  <link rel="stylesheet" href="./style.css">

  <!-- favicon -->
  <link rel="icon" href="./favicon.png" type="image/png">

  <!-- jsPDF & html2canvas pour export PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/3.5.0/jspdf.umd.min.js" defer></script>

  <!-- Meta description -->
  <meta name="description" content="Simulateur d'ordonnancement (machine unique) â€” Gantt, IA, export PDF â€” projet Ã©tudiant" />
</head>
<body>
  <!-- ================= NAV / BANDEAU INDUSTRIEL ================= -->
  <nav class="topbar">
    <div class="topbar-left">
      <!-- logo (CDN) -->
      <img src="https://cdn-icons-png.flaticon.com/512/1048/1048947.png" alt="Logo industriel" class="logo-gear">
      <span class="brand-name">Ordonnancement Industriel</span>
    </div>

    <div class="topbar-right">
      <span class="status-dot" title="Statut serveur (simulation)"></span>
      <span class="status-text">En ligne</span>
    </div>
  </nav>

  <!-- ================= HERO / HEADER ================= -->
  <header class="hero-header">
    <div class="hero-content">
      <h1 class="site-title">âš™ï¸ Ordonnancement sur une seule machine</h1>
      <p class="site-subtitle">Simulation intelligente â€” Gantt, indicateurs et IA d'aide Ã  la dÃ©cision</p>
    </div>
  </header>

  <!-- ================= MAIN CONTAINER ================= -->
  <main class="container">

    <!-- --------- SECTION: FORMULAIRE D'AJOUT TACHES --------- -->
    <section class="card" id="card-add">
      <h2>â• Ajouter / Ã©diter une tÃ¢che</h2>

      <!-- Row principale d'ajout -->
      <div class="form-row">
        <label for="name">Nom :</label>
        <input id="name" type="text" placeholder="Ex : A" />

        <label for="dur">DurÃ©e (pi) :</label>
        <input id="dur" type="number" min="1" value="5" />

        <label for="due">Date promise (Di) :</label>
        <input id="due" type="number" min="0" placeholder="optionnel" />

        <label for="hasPred" title="Coche si la tÃ¢che a un prÃ©dÃ©cesseur">A un prÃ©dÃ©cesseur :</label>
        <input id="hasPred" type="checkbox" />

        <label for="predName">Nom prÃ©dÃ©cesseur :</label>
        <input id="predName" type="text" placeholder="Ex : B (optionnel)" />

        <button id="addBtn" class="primary">Ajouter</button>
        <button id="editBtn" class="secondary" style="display:none">Enregistrer changement</button>
        <button id="clearBtn" class="secondary">Effacer tout</button>
      </div>

      <!-- Notes / aide -->
      <p class="muted" style="margin-top:10px;">
        Astuce : si une tÃ¢che a un prÃ©dÃ©cesseur, indique son nom exact dans "Nom prÃ©dÃ©cesseur".<br>
        Les prÃ©dÃ©cesseurs crÃ©ent des contraintes simples (la tÃ¢che ne peut dÃ©marrer avant la fin du prÃ©dÃ©cesseur).
      </p>

      <!-- Choix des mÃ©thodes Ã  calculer (checkboxes) -->
      <div class="form-row small-gap" style="margin-top:12px;">
        <label style="font-weight:700;color:#004aad;margin-right:8px">MÃ©thodes :</label>
        <label><input type="checkbox" id="method_fifo" checked> FIFO</label>
        <label><input type="checkbox" id="method_spt" checked> SPT</label>
        <label><input type="checkbox" id="method_lpt" checked> LPT</label>
        <label><input type="checkbox" id="method_dp" checked> DP</label>
        <label><input type="checkbox" id="method_rc" checked> RC</label>

        <button id="allBtn" class="primary" style="margin-left:12px">Calculer sÃ©lection</button>
      </div>

      <!-- Choix d'objectif (radio) -->
      <div class="form-row small-gap" style="margin-top:12px;">
        <label style="font-weight:700;color:#004aad;margin-right:8px">Objectif :</label>
        <label><input type="radio" name="objective" value="Cmax" checked> Minimiser Cmax (makespan)</label>
        <label><input type="radio" name="objective" value="Tardiness"> Minimiser retard total</label>
        <span class="muted" style="margin-left:8px">Choisis l'objectif d'optimisation avant le calcul.</span>
      </div>

      <!-- Actions additionnelles -->
      <div class="form-row small-gap" style="margin-top:12px;">
        <button id="exportPDF" class="secondary">ğŸ“„ Exporter PDF</button>
        <input id="importPdfInput" type="file" accept="application/pdf" style="display:none" />
        <button id="importPdfBtn" class="ghost">ğŸ“¥ Importer PDF</button>
        <button id="exampleBtn" class="ghost">ğŸ” Charger exemple</button>
      </div>
    </section>

    <!-- --------- SECTION: TABLEAU DES TACHES --------- -->
    <section class="card" id="card-list">
      <h2>ğŸ“‹ Liste des tÃ¢ches (entrÃ©e)</h2>
      <div class="table-wrap">
        <table id="tasksTable" class="striped">
          <thead>
            <tr>
              <th>Nom</th>
              <th>DurÃ©e</th>
              <th>Date promise</th>
              <th>PrÃ©dÃ©cesseur</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <!-- Rempli dynamiquement -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- --------- SECTION: RÃ‰SULTATS & GANTT --------- -->
    <section class="card" id="card-results">
      <h2>ğŸ“ˆ RÃ©sultats â€” Tableaux & GANTT</h2>

      <!-- Conteneur pour rÃ©sultats tabulaires (mÃ©thode par mÃ©thode) -->
      <div id="resultContainer" aria-live="polite"></div>

      <!-- Zone Gantt globale (JS injecte les barres) -->
      <div id="ganttArea" class="gantt-chart" aria-live="polite" style="margin-top:14px;">
        <!-- barres et labels insÃ©rÃ©s par JS -->
      </div>

      <!-- Axe temporel / timeline sous le Gantt -->
      <div id="timeAxis" class="time-axis" style="margin-top:8px;color:#445566;font-size:13px;">
        <!-- JS va insÃ©rer 0,1,2... jusqu'Ã  makespan -->
      </div>

      <!-- Indices automatiques (affichÃ© sans bouton) -->
      <div id="indicesContainer" style="margin-top:18px;"></div>

      <!-- IA Thinker (affichÃ© automatiquement par JS) -->
      <div id="aiThinker" class="ai-box" style="margin-top:18px;"></div>
    </section>

    <!-- --------- SECTION: FOOTER --------- -->
    <footer class="card muted" style="margin-top:20px;">
      <p>Â© 2025 â€” Projet Ordonnancement â€” <strong>Nabil Benkirane</strong></p>
      <p>Prototype Ã©tudiant â€¢ HÃ©bergÃ© sur GitHub Pages</p>
    </footer>
  </main>

  <!-- ================= SCRIPTS ================= -->
  <!-- Le script principal (sera fourni aprÃ¨s) -->
  <script src="./script.js"></script>

  <!-- Petit script utilitaire pour importer PDF (ouvre l'input file) -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('importPdfBtn')?.addEventListener('click', () => {
        document.getElementById('importPdfInput').click();
      });

      // exemple rapide : charger jeu d'exemple
      document.getElementById('exampleBtn')?.addEventListener('click', () => {
        const evt = new CustomEvent('loadExample');
        document.dispatchEvent(evt);
      });
    });
  </script>

  <!-- ================= COMMENTAIRES DES ELEMENTS =================
    IDs importants utilisÃ©s par le JS:
      - addBtn, editBtn, clearBtn
      - name, dur, due, hasPred, predName
      - method_fifo, method_spt, method_lpt, method_dp, method_rc
      - allBtn
      - tasksTable
      - resultContainer, ganttArea, timeAxis
      - indicesContainer, aiThinker
      - exportPDF, importPdfInput, importPdfBtn
    ================================================================= -->

</body>
</html>
