<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ordonnancement sur une seule machine â€” Smart Scheduler IA</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Poppins:wght@600;700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="./style.css">

  <!-- Fav icon -->
  <link rel="icon" href="./favicon.png" type="image/png">

  <!-- PDF Libraries (deferred) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/3.5.0/jspdf.umd.min.js" defer></script>
</head>

<body>
  <!-- ===== NAVBAR INDUSTRIEL ===== -->
  <nav class="topbar">
    <div class="topbar-left">
      <img src="https://cdn-icons-png.flaticon.com/512/1048/1048947.png" alt="Logo industriel" class="logo-gear">
      <span class="brand-name">Smart Factory Tools</span>
    </div>
    <div class="topbar-right">
      <span class="status-dot"></span> En ligne
    </div>
  </nav>

  <!-- ===== HEADER ===== -->
  <header class="hero-header">
    <div class="hero-content">
      <h1 class="site-title">âš™ï¸ Ordonnancement sur une seule machine</h1>
      <p class="site-subtitle">Simulation, Gantt, IA intÃ©grÃ©e et analyse automatique</p>
    </div>
  </header>

  <!-- ===== MAIN ===== -->
  <main class="container">
    <!-- ===== AJOUT TÃ‚CHE ===== -->
    <section class="card">
      <h2>â• Ajouter une tÃ¢che</h2>

      <div class="form-row">
        <label for="name">Nom :</label>
        <input id="name" type="text" placeholder="Ex : A" />

        <label for="dur">DurÃ©e (pi) :</label>
        <input id="dur" type="number" min="1" value="5" />

        <!-- Nouvelle : unitÃ© de saisie par tÃ¢che -->
        <label for="taskUnit">UnitÃ© saisie :</label>
        <select id="taskUnit">
          <option value="hours" selected>Heures</option>
          <option value="days">Jours</option>
          <option value="weeks">Semaines</option>
          <option value="months">Mois</option>
        </select>

        <label for="due">Date promise (Di) :</label>
        <input id="due" type="number" min="0" placeholder="optionnel" />

        <label for="hasPred">A un prÃ©dÃ©cesseur :</label>
        <input id="hasPred" type="checkbox" />

        <label for="predName">Nom prÃ©dÃ©cesseur :</label>
        <input id="predName" type="text" placeholder="Ex : B" />

        <button id="addBtn" class="primary">Ajouter</button>
        <button id="clearBtn" class="secondary">Effacer tout</button>
      </div>

      <!-- MÃ‰THODES -->
      <div class="form-row small-gap" style="margin-top:10px;">
        <label style="font-weight:700;color:#004aad;margin-right:8px">MÃ©thodes :</label>
        <label><input type="checkbox" id="method_fifo" checked> FIFO</label>
        <label><input type="checkbox" id="method_spt" checked> SPT</label>
        <label><input type="checkbox" id="method_lpt" checked> LPT</label>
        <label><input type="checkbox" id="method_dp" checked> DP</label>
        <label><input type="checkbox" id="method_rc" checked> RC</label>
        <button id="allBtn" class="primary" style="margin-left:12px">Calculer sÃ©lection</button>
      </div>

      <!-- OBJECTIF -->
      <div class="form-row small-gap" style="margin-top:10px;">
        <label style="font-weight:700;color:#004aad;margin-right:8px">Objectif :</label>
        <label><input type="radio" name="objective" value="Cmax" checked> Minimiser Cmax</label>
        <label><input type="radio" name="objective" value="Tardiness"> Minimiser retard total</label>
      </div>

      <!-- OPTIONS TEMPORELLES GLOBALES -->
      <div class="form-row small-gap" style="margin-top:10px;">
        <label for="useRealDates" style="font-weight:700;color:#004aad;">ğŸ•“ Utiliser des vraies dates :</label>
        <input id="useRealDates" type="checkbox" />
        <div id="realDateContainer" style="display:none;">
          <label for="startDate" style="margin-left:10px;">Date de dÃ©but :</label>
          <input id="startDate" type="datetime-local" />
        </div>
      </div>

      <!-- UNITÃ‰ DE TEMPS GLOBALE (pour l'affichage/axe) -->
      <div class="form-row small-gap" style="margin-top:10px;">
        <label for="timeUnit" style="font-weight:700;color:#004aad;">â±ï¸ UnitÃ© de temps (affichage) :</label>
        <select id="timeUnit">
          <option value="hours" selected>Heures</option>
          <option value="days">Jours</option>
          <option value="weeks">Semaines</option>
          <option value="months">Mois</option>
        </select>
        <span style="color:#6b7280;font-size:0.9rem;">(dÃ©finit l'Ã©chelle/axe des Gantt)</span>
      </div>

      <!-- ACTIONS -->
      <div class="form-row small-gap" style="margin-top:10px;">
        <button id="exportPDF" class="secondary">ğŸ“„ Exporter PDF</button>
        <input id="importPdfInput" type="file" accept="application/pdf" style="display:none" />
        <button id="importPdfBtn" class="ghost">ğŸ“¥ Importer PDF</button>
        <button id="exampleBtn" class="ghost">ğŸ” Exemple</button>
      </div>
    </section>

    <!-- ===== TABLEAU DES TÃ‚CHES ===== -->
    <section class="card">
      <h2>ğŸ“‹ Liste des tÃ¢ches</h2>
      <div class="table-wrap">
        <table id="tasksTable" class="striped">
          <thead>
            <tr>
              <th>Nom</th>
              <th>DurÃ©e</th>
              <th>UnitÃ©</th>
              <th>Date promise</th>
              <th>PrÃ©dÃ©cesseur</th>
              <th>Supprimer</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- ===== RÃ‰SULTATS ===== -->
    <section class="card">
      <h2>ğŸ“ˆ RÃ©sultats - Tableaux & GANTT</h2>

      <div id="resultContainer"></div>
      <div id="ganttArea" class="gantt-chart"></div>
      <div id="indicesContainer" style="margin-top:18px;"></div>
      <div id="aiThinker" class="ai-box" style="margin-top:18px;"></div>
    </section>

    <!-- ===== FOOTER ===== -->
    <footer class="card muted">
      <p>Â© 2025 â€” Projet Ordonnancement â€” <strong>Nabil Benkirane</strong></p>
      <p>Prototype Ã©tudiant Â· HÃ©bergÃ© via GitHub Pages</p>
    </footer>
  </main>

  <!-- ===== SCRIPT ===== -->
  <script src="./script.js"></script>

  <script>
    // simple UI helpers: show/hide date input & forward file click
    document.addEventListener("DOMContentLoaded", () => {
      const useRealDates = document.getElementById("useRealDates");
      const realDateContainer = document.getElementById("realDateContainer");
      useRealDates.addEventListener("change", () => {
        realDateContainer.style.display = useRealDates.checked ? "flex" : "none";
      });

      const importBtn = document.getElementById("importPdfBtn");
      const input = document.getElementById("importPdfInput");
      importBtn?.addEventListener("click", () => input.click());
    });
  </script>
</body>
</html>

